# My TripSignal - PRD

**작성일:** 2026-02-18
**버전:** 0.6 (PoC)
**상태:** Implemented
**담당:** Growth Department

---

## 1. 배경 및 문제 정의

### 문제 진단

| 항목 | 현재 상태 | 문제 |
|------|----------|------|
| 여행 가격 탐색 | 항공/숙소를 별도로 검색 | 총 여행 비용을 한눈에 비교 불가 |
| 최적 출발일 | 사용자가 직접 날짜를 바꿔가며 검색 | 수십 번 검색해야 최저가 출발일 발견 |
| 여정 길이 유연성 | 고정 일정만 검색 가능 | "3~7일 중 언제가 제일 싼지" 비교 불가 |
| 리텐션 | 여행 계획 시에만 앱 방문 | 일상적 앱 방문 동기 부재 |

### 인사이트

Kream 대표의 관찰: 한국 사용자에게 가장 높은 리텐션을 가진 서비스는 주식 앱이며, 이는 **실시간 가격 변동을 그래프로 보여주기 때문**임. Kream은 이를 신발/의류에 적용하여 성공함.

**여행에 적용 가능한 포인트:**
- 항공권: 같은 ICN-CDG 노선이 출발일에 따라 80만~539만원 (6.7배 차이)
- 숙소: 같은 파리 4성급이 체크인일에 따라 32만~48만원/박 (1.5배 차이)
- 항공 + 숙소 합산 시 최저 306만원 ~ 최고 913만원 (3배 차이)

**핵심 가설:**
> 향후 3개월의 출발일별 총 여행 비용(항공 왕복 + 숙소)을 하나의 캘린더 뷰로 보여주면, 사용자는 최적의 출발일과 여정 길이를 쉽게 선택할 수 있고, 이 과정에서 앱 재방문이 증가할 것이다.

---

## 2. 제품 개요

### 한 줄 요약

향후 3개월간, 출발일별 **총 여행 비용(왕복 항공 + 숙소)**을 캘린더 형태로 보여주고, 3~7일 여정 길이를 조정하며 최저가 출발일을 탐색할 수 있는 기능. "TripSignal"은 여행의 최적 타이밍을 알려주는 **시그널**이라는 의미를 담고 있음.

### 핵심 사용자 시나리오

**사용자:** "파리에 가고 싶은데, 3월~5월 중에 언제 가면 가장 저렴할까? 4일이면 될 수도 있고, 일주일 갈 수도 있는데."

**현재 경험:**
1. 마리트 항공 검색 → 3/1 출발 조회 → 가격 확인
2. 숙소 검색 → 3/1~3/5 조회 → 가격 확인
3. 머릿속으로 합산: "항공 100만 + 숙소 80만 = 180만"
4. 날짜 바꿔서 3/8로 다시 검색... 반복 수십 회
5. 여정 길이를 5일로 바꿔서 또 다시 검색...
6. 포기하고 대충 결정

**My TripSignal 경험:**
1. "파리" 선택
2. 여정 길이: 5일 선택 (슬라이더로 3~7일 조절)
3. 3개월 캘린더에 출발일별 총 비용 표시
4. "3월 3일 출발 5일: 280만원" ← 최저가 하이라이트
5. 슬라이더를 7일로 변경 → 캘린더 즉시 업데이트
6. "3월 3일 출발 7일: 306만원" vs "5월 1일 출발 7일: 350만원"
7. 원하는 날짜 선택 → 항공/숙소 상세로 이동

---

## 3. 기능 상세

### 3.1 여행지 선택

사용자가 목적지를 선택함. 초기 지원 도시는 인기 해외 여행지 기준으로 선정.

**PoC 대상 (20개 도시):**

| 대륙 | 도시 |
|------|------|
| 동아시아 | 도쿄, 오사카, 후쿠오카, 삿포로, 타이베이, 홍콩 |
| 동남아시아 | 방콕, 다낭, 호치민, 하노이, 싱가포르, 세부, 발리, 나트랑 |
| 유럽 | 파리, 런던, 로마 |
| 미주/태평양 | 괌, 호놀룰루, 뉴욕 |

### 3.2 여정 길이 선택 (3~7일)

슬라이더 또는 탭으로 여정 길이를 선택. 기본값은 5일.

| 여정 | 설명 |
|------|------|
| 3일 | 주말 + 1일 (금~일) |
| 4일 | 짧은 여행 |
| 5일 | 표준 여행 (기본값) |
| 6일 | 여유 있는 여행 |
| 7일 | 일주일 여행 |

여정 길이 변경 시 캘린더의 모든 가격이 즉시 재계산됨.

**계산 로직:**
- 여정 N일 선택 시, 각 출발일 D에 대해:
  - 항공: D일 출발 직항 왕복 최저가 (캘린더 API에서 transfer=0으로 조회)
  - 숙소: D일 체크인, D+N일 체크아웃의 4성급 최저가
  - 총 비용 = 항공 왕복 최저가 + 숙소 최저가 x N박
- 항공과 숙소 모두 최저가 기준을 사용하여 "이 날짜에 가장 저렴하게 갈 수 있는 비용"을 일관되게 제시함

### 3.3 가격 추이 그래프 (신규)

요약 카드와 캘린더 사이에 **꺾은선 그래프**를 배치하여 가격 트렌드를 시각화.

**구성 요소:**
- X축: 출발일 (전체 기간)
- Y축: 1인당 예상 비용
- 블루 꺾은선: 출발일별 비용 추이
- 회색 점선: 평균 비용 (수평선, "평균 XX만" 라벨)
- 블루 점: 최저가 위치 ("최저 XX만" 라벨)
- 마우스오버/터치: 세로 점선 + 해당 날짜/가격 툴팁

### 3.4 캘린더 뷰 (핵심 화면)

**월 넘기기 방식**으로 한 달씩 표시. `← 2026년 3월 →` 형태로 좌우 네비게이션. 각 날짜 셀에 **1인당 예상 비용**을 표시.

**시각적 표현:**
- 각 날짜에 1인당 비용 (만원 단위)
- 색상 코딩 (MRT 블루 톤):
  - 블루 (#DBEAFE): 저렴 (하위 25%) + 최저가 펄스 애니메이션
  - 화이트: 보통 (25~75%)
  - 연한 주황/빨강: 비쌈 (상위 25%)
- 최저가 날짜에 "최저가" 블루 배지
- 데이터 없는 날짜는 회색 처리
- 하단에 월 인디케이터 점 (현재 월 = 블루 확장)

**표시 정보 (날짜 셀):**

| 요소 | 예시 |
|------|------|
| 총 비용 | 306만 |
| 색상 | 저렴(진한 색) |
| 최저가 표시 | 별도 배지 |

**표시 정보 (하단 요약):**

| 요소 | 예시 |
|------|------|
| 3개월 최저가 | 306만원 (3/3 출발, 7일) |
| 3개월 평균 | 450만원 |
| 평균 대비 절감액 | "최저가로 가면 144만원 절약" |

### 3.4 가격 분해 뷰

캘린더에서 특정 날짜를 탭하면 가격 분해를 보여줌. 사용자가 "이 가격이 어떤 항공사/어떤 숙소 기준인지" 바로 알 수 있도록 **출처를 명시**함.

| 항목 | 금액 | 출처 명시 |
|------|------|----------|
| 왕복 항공 | 804,400원 | **대한항공 (KE)** · 직항 - 해당 날짜 최저가 |
| 숙소 7박 | 1,439,102원 | **호텔 이비스 스타일 파리 가르 뒤 노르** · 4성급 최저가 205,586원/박 |
| **합계** | **2,243,502원** | |

**출처 명시 규칙:**
- 항공: 최저가 항공편의 **항공사명 (IATA 코드)** 표시. 예: "대한항공 (KE)", "아시아나 (OZ)"
- 숙소: 최저가 호텔의 **호텔명** 표시. 15개 호텔 중 해당 날짜/여정 기준 최저가를 제공하는 호텔
- 사용자가 실제 예약할 상품이 무엇인지 명확히 인지할 수 있도록 하는 것이 목적

여기서 "항공권 보기" → 럭키글라이드 또는 항공 검색으로 연결.
"숙소 보기" → 숙소 검색 결과로 연결.

### 3.5 "가격 대비 시기" 라벨

금액만 보여주면 "이게 싼 건지 비싼 건지" 판단이 어려움. 맥락을 제공하는 라벨을 붙임.

**라벨 기준 (3개월 가격 분포 대비):**

| 위치 | 라벨 | 설명 |
|------|------|------|
| 하위 10% | "최저가 근처" | 지금 이 가격은 매우 저렴한 편임 |
| 하위 25% | "저렴한 편" | 평균보다 확실히 저렴함 |
| 25~75% | 별도 라벨 없음 | 보통 수준 |
| 상위 25% | "비싼 편" | 다른 날짜를 고려하는 것이 좋음 |
| 상위 10% | "피크 시즌" | 가장 비싼 시기임 |

---

## 4. 데이터 아키텍처

### 4.1 데이터 소스 (실제 검증된 스펙)

**항공권 가격 — Window API (왕복 최저가)**
- 엔드포인트: POST `api3.myrealtrip.com/flight/api/price/calendar/window`
- 인증: 불필요
- 입력: `departureCity`, `arrivalCity`, `departureDate`, `period` (여정 일수), `airlines: ["ALL"]`, `transfer: 0`
- 출력: `flightWindowInfoResults[]` — `departureDate`, `arrivalDate`, `airline` (IATA 코드), `totalPrice` (1인 왕복가)
- 특성: 1회 호출로 ~170일치 왕복 최저가 반환. 기본 5일 여정 기준으로 수집
- 주의: `airlines`는 반드시 배열 `["ALL"]`, 필드명은 `departureCity/arrivalCity` (from/to 아님)

**숙소 가격 — UnionStay API (도심 4성급)**
- 엔드포인트: GET `api3.myrealtrip.com/unionstay/v2/front/search`
- 인증: 불필요 (Origin 헤더 필요: `https://accommodation.myrealtrip.com`)
- 입력: `keyword`, `regionId`, `checkIn`, `checkOut`, `adultCount=2`, `isDomestic=false`, `selected=starRating:fourstar,stayPoi:{downtownPoiId}`
- 출력: `data.dynamicArea.sections[].loggingMeta.BIZLOG.data` — `item_price` (세금포함 1박가), `item_name` (호텔명)
- 특성: 1회 호출로 ~20개 호텔 반환. 4박 기준 검색, `item_price`는 이미 1박가 (나누기 불필요)
- 주의: 구 API `/search/map/v2/search`는 데이터 미반환. `stayPoi` 필터로 도심 지역만 필터링

### 4.2 가격 계산 방법론

**항공권:**
- 캘린더 API에 transfer=0 파라미터를 적용하여 직항만 필터링
- 날짜별 "직항 중 최저가 왕복" 반환값을 그대로 사용
- 직항 기준을 적용하는 이유: 경유편 특가(LCC 경유 등)가 포함되면 실제 사용자 기대와 괴리가 발생하며, 가격 변동이 경유 옵션에 의해 왜곡될 수 있음

**숙소:**
- 15개 호텔의 판매가(sale price) 수집
- 최저가 추출: 15개 호텔 중 가장 저렴한 1박 가격 = "최저 1박 가격"
- 최저가 호텔명 기록: 최저가를 제공하는 호텔의 이름을 함께 저장하여 가격 분해 뷰에서 출처 명시
- N박 합산: 최저 1박 가격 x N
- 항공권이 "해당 날짜 전체 항공사 중 최저가"를 보여주는 것과 동일한 로직을 숙소에도 적용하여, 날짜별 가격 변동(variance)을 일관되게 반영함

**총 여행 비용 (성인 2인 기준):**
- 항공 2인 = 1인 왕복 최저가 × 2
- 숙소 N박 = 도심 4성급 최저가/박 × (여정일수 - 1)
- 2인 합계 = 항공 2인 + 숙소 N박
- **1인당 = 2인 합계 / 2** (캘린더에 표시되는 금액)
- 항공/숙소 모두 "해당 날짜에 가능한 최저 비용"으로 통일

**이상치 처리:**
- 항공: 직항 필터(transfer=0) 적용으로 경유편 특가에 의한 왜곡 제거. 극단적 스파이크(상위 10%)는 캘린더에서 "피크 시즌" 라벨 표시. 직항이 없는 날짜는 "직항 없음" 표시
- 숙소: soldOut 상품 제외. 최저가가 극단적으로 낮은 경우(프로모션 등) 참고가임을 명시

### 4.3 API 호출 전략

**여정 길이별 숙소 조회:**
- 사용자가 여정을 변경할 때마다 실시간 API 호출은 비효율적
- 사전 수집: 3개월간 **3일 간격** 체크인 날짜 x **5가지 여정 길이**(3,4,5,6,7일) 조합
- 조합 수: 약 30개 체크인 날짜 x 5 여정 = **150회 숙소 API 호출**
- 이를 배치로 수집하여 캐시해두면, 사용자 조회 시 즉시 응답 가능

**일일 배치 수집 (GitHub Actions):**

| 대상 | API 호출 수 (1개 도시) | 비고 |
|------|:---:|------|
| 항공 window API | 1 | 5일 여정 기준, ~170일치 반환 |
| 숙소 unionstay API | ~30 | 3일 간격 체크인, 4박 기준 |
| **합계** | **~31** | 약 30초(항공) + 1.5분(숙소) |

3개 도시 기준: 약 93회 → 약 5분. GitHub Actions 무료 티어 (월 2,000분) 내 충분.

---

## 5. 사용자 플로우

### 메인 플로우

1. **여행지 선택** - 20개 도시 (대륙별 필터링)
2. **여정 길이 선택** - 슬라이더 3~7일, 기본값 5일
3. **캘린더 뷰 확인** - 3개월 출발일별 총 비용 히트맵
4. **최저가 출발일 확인** - 자동 하이라이트
5. **날짜 선택** - 특정 출발일 탭
6. **가격 분해 확인** - 항공/숙소 비용 상세
7. **예약으로 이동** - "항공권 보기" / "숙소 보기" 버튼

### 여정 길이 변경 플로우

1. 슬라이더를 5일 → 3일로 변경
2. 캘린더의 모든 가격이 즉시 업데이트 (숙소 N박 재계산)
3. 최저가 출발일이 변경될 수 있음 (3일이면 다른 날이 최저일 수 있음)
4. "5일 여행 시 306만원 → 3일 여행 시 190만원" 비교 가능

---

## 6. 기존 서비스와의 관계

### 럭키글라이드와의 차별화

| 항목 | 럭키글라이드 | My TripSignal |
|------|-----------|----------------|
| 카테고리 | 항공권만 | 항공 + 숙소 합산 |
| 보여주는 것 | 노선별 항공 가격 흐름 | 총 여행 비용 |
| 여정 유연성 | 고정 일정 | 3~7일 슬라이더 |
| 사용 시점 | 항공권 구매 결정 시 | 여행 계획 초기 (언제/며칠 갈지) |
| 기능 성격 | 항공 가격 탐색 도구 | 총 비용 최적화 도구 |

**시너지:** My TripSignal에서 출발일 선택 → "항공권 상세" 탭 시 럭키글라이드로 연결

### 숙소 검색과의 관계

My TripSignal의 숙소 가격은 **4성급 최저가 기준**. "이 날짜에 가장 저렴한 4성급 호텔 1박 가격"을 기준으로 산출됨. 실제 예약 시에는 숙소 검색으로 이동하여 원하는 호텔을 직접 선택.

---

## 7. 성공 지표

### Primary Metrics

| 지표 | 정의 | 목표 (PoC) |
|------|------|-----------|
| DAU | My TripSignal 일간 방문자 수 | 측정 시작 |
| D7 Retention | 첫 사용 후 7일 내 재방문율 | 40%+ |
| 여정 길이 조작률 | 슬라이더를 1회 이상 변경한 사용자 비율 | 50%+ |

### Secondary Metrics

| 지표 | 정의 | 목표 (PoC) |
|------|------|-----------|
| 날짜 선택 → 상세 뷰 전환율 | 캘린더 날짜 탭 → 가격 분해 뷰 진입률 | 30%+ |
| 상세 뷰 → 예약 전환율 | 가격 분해 뷰 → 항공/숙소 검색 이동률 | 10%+ |
| 평균 세션 시간 | My TripSignal 내 체류 시간 | 2분+ |

### Guard Metrics

| 지표 | 감시 사항 |
|------|----------|
| 기존 항공/숙소 검색 전환율 | My TripSignal 도입 후 하락하지 않는지 |
| 구매 지연 | "더 싸질까봐" 구매를 미루는 행동 증가하지 않는지 |

---

## 8. 리스크 및 대응

### 데이터 정확성

| 리스크 | 확률 | 대응 |
|--------|------|------|
| 숙소 15개가 전체 시장을 대표하지 못함 | 중 | "4성급 기준 참고가"로 명시. 추후 리스트 API 확보 시 샘플 확대 |
| 직항이 없는 날짜 발생 가능 | 중 | 해당 날짜는 "직항 없음" 표시. 추후 경유편 가격도 선택적으로 보여주는 옵션 검토 |
| API 응답 변동 (같은 조건인데 가격 상이) | 낮음 | 일 1회 수집으로 일관성 확보. 실시간 조회 아님을 명시 |

### 사용자 경험

| 리스크 | 확률 | 대응 |
|--------|------|------|
| "총 비용"이 실제 예약가와 다름 | 높음 | "예상 비용이며 실제 예약 시 달라질 수 있음" 안내 |
| 구매 지연 (저가 대기) | 중 | "최저가 근처" 라벨로 행동 유도. 가격 보장 정책 검토 |
| 3~7일 슬라이더 조작이 직관적이지 않음 | 낮음 | 기본값 5일 제공. 탭 UI도 대안으로 검토 |

### 운영

| 리스크 | 확률 | 대응 |
|--------|------|------|
| API rate limit | 낮음 | 일 1회 배치 수집으로 부하 최소화 |
| API 스펙 변경 | 낮음 | 응답 구조 변경 감지 로직 포함 |

---

## 9. PoC 실행 계획

### Phase 1: 데이터 수집 (1~2주)

**목표:** 매일 자동으로 3개 도시의 가격 데이터를 수집하여, 데이터 품질과 변동 패턴을 확인

**실행:**
- GitHub Actions cron job (매일 KST 09:00)
- Python 스크립트로 API 호출 → CSV 적재 → auto-commit
- 수집 대상: 파리, 도쿄, 방콕 / 3~7일 여정 / 3개월 범위

**산출물:**
- 일별 수집 CSV 데이터
- 2주 후: "가격이 실제로 유의미하게 변동하는가?" 판단 가능

### Phase 2: 시각화 프로토타입 (1주)

**목표:** 수집된 데이터를 기반으로 캘린더 뷰 프로토타입 제작

**실행:**
- 간단한 웹 페이지 (HTML + JS)
- 여정 길이 슬라이더
- 3개월 캘린더 히트맵
- 가격 분해 뷰

### Phase 3: 사용자 검증 (1~2주)

**목표:** 내부 사용자 또는 소규모 사용자 그룹에게 프로토타입을 보여주고 반응 측정

**검증 질문:**
- 이 화면을 매일 확인하고 싶은가?
- 여정 길이 슬라이더를 실제로 조작하는가?
- "총 비용"이 유용하다고 느끼는가?
- 이 정보를 보고 실제 예약까지 하는가?

---

## 10. E&R팀 OKR 연결

이 프로덕트는 E&R팀의 **ER-KR1 (Retention Status 발굴)** 과 직접 연결됨.

**Retention Status 가설:**
> "My TripSignal을 주 3회 이상 확인하는 사용자는 M1 리텐션이 전사 평균 대비 유의미하게 높을 것이다"

**검증 기준 (ER-KR1 3가지 동시 만족):**

| 기준 | 목표 | 측정 방법 |
|------|------|----------|
| 규모 (Scale) | MAU의 5%+ | My TripSignal 월 방문자 수 |
| 품질 (Quality) | M1 리텐션 +5%p | My TripSignal 사용자 vs 미사용자 코호트 비교 |
| 재현 가능성 | 노출 확대 시 증가 | 홈 화면 노출 위치 변경 실험 |

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 0.1 | 2026-02-18 | 초안 작성 (PoC 범위) |
| 0.2 | 2026-02-18 | 숙소 가격 기준 변경: 중앙값 → 최저가. 항공/숙소 모두 최저가 기준으로 통일하여 날짜별 가격 변동 일관성 확보 |
| 0.3 | 2026-02-18 | 항공 검색 조건 변경: 전체(경유 포함) → 직항만(transfer=0). 경유편 특가에 의한 가격 왜곡 방지 |
| 0.4 | 2026-02-18 | 프로덕트 네이밍 확정: "My TripSignal". 여행 최적 타이밍을 알려주는 시그널이라는 의미 |
| 0.5 | 2026-02-19 | 가격 분해 뷰에 출처 명시 추가: 항공사명(IATA 코드) + 최저가 호텔명 |
| 0.6 | 2026-02-19 | 실제 API 스펙 반영 (flight/window, unionstay), 2인 기준 인당 표시, 도심 필터, 가격 추이 그래프 추가, 월 넘기기 캘린더, MRT 블루 톤 적용 |

---

다음 리뷰 예정: Phase 1 데이터 수집 2주 후
담당: Growth Department
승인: Growth Director
